# Linux Shell 学习时的小知识

## 目录

* [exit 0 和 exit 1](#exit-0和exit-1-top)
* [特殊变量](#特殊变量-top)
* [让一个变量获得命令输出的结果](#让一个变量获得命令输出的结果-top)
* [命令 `> /dev/null 2 > &1`和`命令 &> /dev/null`](#命令--devnull-2--1和命令--devnull-top)

## `exit 0`和`exit 1` [[Top]](#目录)

* Linux exit 命令用于退出目前的 shell
* 执行 exit 可使 shell 以指定的状态值退出
* 若不设置状态值参数，则 shell 以预设值退出；状态值 0 代表执行成功，其他值代表执行失败
* exit 也可用在 script，离开正在执行的 script，回到 shell
> 语法：exit [ 状态值 ]

<div align=center>
  <img src="./images/shell_exit.jpg"><br/>Ubuntu shell exit
 </div>

## 特殊变量 [[Top]](#目录)

| $X | 说明 |
| --- | --- | 
| $? | 最近一次运行命令的结束代码（返回值 0 表示成功，非 0 表示失败） |
| $$ | 脚本运行的当前进程 ID 号（PID） |
| $n(n=1,2...) | 传递给该shell脚本的第 n 个参数 |
| $0 | 脚本本身的名字 |
| $# | 传递给脚本参数的个数 |
| $* | 脚本的所有参数列表 |

<br/>
<div align=center>
  <img src="./images/shell_$.jpg"><br/>$* 示例
 </div>

## 让一个变量获得命令输出的结果 [[Top]](#目录)

### 1、`$(命令)`表示

``` shell
#!/bin/bash
i=$(ls 123.txt)
echo $i
```

### 2、反引号表示

``` shell
#!/bin/bash
i=`ls 123.txt`
echo $i
```

## `命令 > /dev/null 2 > &1`和`命令 &> /dev/null` [[Top]](#目录)

<br/>
<div align=center>
  <img src="./images/shell_wj.jpg"><br/>
 </div>
 
 ### 文件描述符
 
 * 文件描述符是与文件输入、输出关联的整数。它们用来跟踪已打开的文件
 * 最常见的文件描述符是 stidin、stdout、和 stderr
  * 0 —— stdin（标准输入）
  * 1 —— stdout （标准输出）
  * 2 —— stderr （标准错误）
 * 我们可以将某个文件描述符的内容重定向到另外一个文件描述符中

<br/>
<div align=center>
  <img src="./images/shell_stdout.jpg"><br/>stdout （标准输出）
 </div>
 
 <br/>
<div align=center>
  <img src="./images/shell_stderr.jpg"><br/>stderr （标准错误）
 </div>
 
 ### `/dev/bin`
 
 * `/dev/null`是一个特殊的设备文件，这个文件接收到的任何数据都会被丢弃。因此，null 这个设备通常也被成为位桶（ bit bucket ）或黑洞
 * 重定向操作给这个`/dev/null`文件的所有东西都会被丢弃
 ### 扩展使用
 
 ``` shell
 将 stderr 单独定向到一个文件，将stdout重定向到另一个文件
 ls 123.txt 1> stdout.txt 2> stderr.txt
 将 stderr 转换成 stdout，使得 stderr 和 stdout 都被重新定向到同一个文件中
 ls 123.txt 1> output.txt 2>&1
 或
 ls 123.txt > output.txt 2>&1
 或
 ls 123.txt &> output.txt
 或
 ls 123.txt >& output.txt
 ```
